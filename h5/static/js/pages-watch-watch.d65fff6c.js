(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-watch-watch"],{"06c5":function(t,e,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(i("6b75"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t){if("string"===typeof t)return(0,a.default)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,a.default)(t,e):void 0}}},"0d99":function(t,e,i){"use strict";function a(t,e){if(e){var i=/\.(m3u8|flv|mp4)/i,a=i.exec(e),n=a[1].toLowerCase(),o=document.createElement("video");switch(o.id="video",o.style="width: 100%;height: 100%;",o.controls=!0,n){case"m3u8":if(Hls.isSupported()){console.log("Hls-supported");var c=new Hls;c.loadSource(e),c.attachMedia(o),o.play()}else o.canPlayType("application/vnd.apple.mpegurl")&&(console.log("video.canPlayType"),o.src=e);break;case"flv":case"mp4":if(!flvjs.isSupported())throw"flv is not supported!";console.log("flv-supported");var s=flvjs.createPlayer({type:n,url:e});s.attachMediaElement(o),s.load(),s.play();break}t.appendChild(o)}}i("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.videoPlayer=a},2909:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=s(i("6005")),n=s(i("db90")),o=s(i("06c5")),c=s(i("3427"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t){return(0,a.default)(t)||(0,n.default)(t)||(0,o.default)(t)||(0,c.default)()}},"295a":function(t,e,i){"use strict";i.r(e);var a=i("f8f2"),n=i("9ad0");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("512f");var c,s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"c127f554",null,!1,a["a"],c);e["default"]=r.exports},3427:function(t,e,i){"use strict";function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"512f":function(t,e,i){"use strict";var a=i("bdaf"),n=i.n(a);n.a},6005:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(i("6b75"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t))return(0,a.default)(t)}},"6b75":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"9ad0":function(t,e,i){"use strict";i.r(e);var a=i("fc72"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"9f9a":function(t,e,i){t.exports=i.p+"static/img/detail.279ee28c.png"},bdaf:function(t,e,i){var a=i("f1c3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("16ba2bc4",a,!0,{sourceMap:!1,shadowMode:!1})},db90:function(t,e,i){"use strict";function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},f1c3:function(t,e,i){var a=i("24fb"),n=i("1de5"),o=i("9f9a");e=a(!1);var c=n(o);e.push([t.i,"uni-page-body[data-v-c127f554]{height:100vh}.watch[data-v-c127f554]{height:100vh;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#f4f4f8}.watch__header[data-v-c127f554]{position:fixed;left:0;top:0;\r\n\r\nwidth:100%;height:%?92?%;text-align:center;font-size:12px;color:#fff;background-color:transparent;\r\n\t/* background: -webkit-gradient(linear, left top, left bottom, color-stop(0, rgba(0,0,0,0.3)), color-stop(1, transparent)); */border-bottom:1px solid rgba(0,0,0,.12);-webkit-box-sizing:border-box;box-sizing:border-box}.watch__header--back[data-v-c127f554]{position:absolute;left:%?10?%;top:%?18?%}.icon-zuojiantou[data-v-c127f554]{font-size:24px;font-weight:600}.watch__header--title[data-v-c127f554]{padding-top:%?10?%}.watch__video[data-v-c127f554]{height:%?420?%;\r\n\r\nbackground:url("+c+") no-repeat 50%;background-size:100% 100%;overflow:hidden}.watch__video--contaner[data-v-c127f554]{height:%?328?%;margin-top:%?92?%;\r\n\r\ncolor:#fff}.watch__video--contaner #video_box[data-v-c127f554],\r\n.watch__video--contaner uni-video[data-v-c127f554]{width:100%;height:100%;background-color:#000}.watch__video .team[data-v-c127f554]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:30px 0}.watch__video .team__item[data-v-c127f554]{text-align:center}.watch__video .team__item--icon[data-v-c127f554]{width:%?100?%;height:%?120?%}.watch__video .team__center[data-v-c127f554]{text-align:center;margin:%?-20?% %?100?% 0}.watch__video .team__center--status[data-v-c127f554]{font-size:14px;padding:%?6?% 0;background-color:rgba(0,0,0,.2);-webkit-border-radius:4px;border-radius:4px}.watch__video .team__center--vs[data-v-c127f554]{font-size:26px}.watch__tabs[data-v-c127f554]{display:-webkit-box;display:-webkit-flex;display:flex}.watch__nav[data-v-c127f554]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?80?%;line-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.watch__nav--item[data-v-c127f554]{width:%?150?%;text-align:center;color:#999;border-bottom:2px solid #e74c5b}.watch--count[data-v-c127f554]{width:%?160?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:14px;background-color:#de1e30;color:#fff}.chat[data-v-c127f554]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow-y:auto}.chat__input[data-v-c127f554]{height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?18?%;border-top:1px solid #e2e2e5}.chat__input--msg[data-v-c127f554]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:14px;padding:%?14?% %?6?%;border:1px solid #e2e2e5;-webkit-border-radius:3px;border-radius:3px}.chat__input--send[data-v-c127f554]{width:%?76?%;text-align:right;font-size:24px;color:#7f8fa6}.chat__input--send--focus[data-v-c127f554]{color:#de1e30}.chat__item[data-v-c127f554]{font-size:12px}.chat__item--welcome[data-v-c127f554]{padding:%?12?% %?8?%;background-color:#fff8dc}.chat__item--left[data-v-c127f554]{padding:%?6?% %?8?%;letter-spacing:1px;line-height:18px}.chat__item--left .name[data-v-c127f554]{color:#de1e30}",""]),t.exports=e},f8f2:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"watch"},[i("v-uni-view",{staticClass:"watch__header"},[i("v-uni-view",{staticClass:"watch__header--back"},[i("v-uni-navigator",{attrs:{"open-type":"navigateBack",delta:1}},[i("v-uni-text",{staticClass:"iconfont icon-zuojiantou"})],1)],1),i("v-uni-view",{staticClass:"watch__header--title"},[i("v-uni-view",[t._v(t._s(t.scheduleInfo.AName)+"VS"+t._s(t.scheduleInfo.BName))]),i("v-uni-view",[t._v("比赛时间："+t._s(t.scheduleInfo.GameDateTime))])],1)],1),i("v-uni-view",{staticClass:"watch__video"},[0===t.scheduleInfo.IsBegin?i("v-uni-view",{staticClass:"watch__video--contaner"},[i("v-uni-view",{staticClass:"team"},[i("v-uni-view",{staticClass:"team__item"},[i("v-uni-image",{staticClass:"team__item--icon",attrs:{src:t.scheduleInfo.AImg1}}),i("v-uni-view",{staticClass:"team__item--name"},[t._v(t._s(t.scheduleInfo.AName))])],1),i("v-uni-view",{staticClass:"team__center"},[i("v-uni-view",{staticClass:"team__center--status"},[t._v(t._s(t.scheduleInfo.Result))]),i("v-uni-view",{staticClass:"team__center--vs"},[t._v("VS")])],1),i("v-uni-view",{staticClass:"team__item"},[i("v-uni-image",{staticClass:"team__item--icon",attrs:{src:t.scheduleInfo.BImg1}}),i("v-uni-view",{staticClass:"team__item--name"},[t._v(t._s(t.scheduleInfo.BName))])],1)],1)],1):i("v-uni-view",{staticClass:"watch__video--contaner"},[i("v-uni-view",{ref:"videoBox",attrs:{id:"video_box"}})],1)],1),i("v-uni-view",{staticClass:"watch__tabs"},[i("v-uni-view",{staticClass:"watch__nav"},[i("v-uni-view",{staticClass:"watch__nav--item"},[t._v("聊天")])],1),i("v-uni-view",{staticClass:"watch--count"},[i("v-uni-text",[t._v(t._s(t.onlineCount)+"人在线")])],1)],1),i("v-uni-view",{ref:"chat",staticClass:"chat",attrs:{id:"chat"}},t._l(t.chatList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"chat__item"},["visitor"===e.type?i("v-uni-view",{staticClass:"chat__item--welcome"},[t._v("欢迎"),i("v-uni-text",{staticStyle:{color:"#17c0eb"}},[t._v(t._s(e.visitorName))]),t._v("降临直播间")],1):t._e(),"chat"===e.type?i("v-uni-view",{staticClass:"chat__item--left"},[i("v-uni-text",{staticClass:"name"},[t._v(t._s(e.name)+"：")]),i("v-uni-text",[t._v(t._s(e.words))])],1):t._e()],1)})),1),i("v-uni-view",{staticClass:"chat__input"},[i("v-uni-input",{staticClass:"chat__input--msg",attrs:{type:"text","confirm-type":"完成",placeholder:"在这里输入聊天内容"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.emitMsgClick.apply(void 0,arguments)}},model:{value:t.inputMsg,callback:function(e){t.inputMsg=e},expression:"inputMsg"}}),i("v-uni-text",{staticClass:"iconfont icon-fasong chat__input--send",class:{"chat__input--send--focus":t.inputMsg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emitMsgClick.apply(void 0,arguments)}}})],1)],1)},o=[]},fc72:function(t,e,i){"use strict";var a=i("4ea4");i("7db0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("2909")),o=i("0d99"),c={data:function(){return{inputMsg:"",visitorName:"",onlineCount:0,chatList:[],roomId:0,isReconnecting:!1,reconnectCtrl:!0,chatTimer:0,scheduleInfo:{},chatScrollTop:0}},onLoad:function(t){var e=this;this.roomId=t.id,this.scheduleInfo=this.$store.state.hotSchedules.find((function(t){return t.ID===+e.roomId})),this.initChatWs()},onReady:function(){var t=this.scheduleInfo.LiveUrl;if(this.$refs.videoBox){var e=this.$refs.videoBox.$el;(0,o.videoPlayer)(e,t)}},onUnload:function(){uni.closeSocket(),this.reconnectCtrl=!1,this.chatTimer&&clearTimeout(this.chatTimer)},methods:{reconnect:function(){var t=this;console.log("进入重连函数"),uni.showLoading({title:"聊天室重连中..."}),this.isReconnecting||(this.isReconnecting=!0,this.chatTimer=setTimeout((function(){t.initChatWs(),t.isReconnecting=!1}),6e3))},scrollToBottom:function(){var t=this.$refs.chat.$el;t.scrollTop=t.scrollHeight},emitMsgClick:function(){var t=this;if(this.inputMsg){var e={type:"chat",name:this.visitorName,words:this.inputMsg,roomId:this.roomId};uni.sendSocketMessage({data:JSON.stringify(e),success:function(e){t.inputMsg=""}})}},initChatWs:function(){var t=this;uni.connectSocket({url:"ws://155.159.71.67:3000/"+this.roomId});uni.onSocketOpen((function(t){console.log("WebSocket连接已打开！"),uni.hideLoading()})),uni.onSocketMessage((function(e){var i,a=JSON.parse(e.data),o=a.type;switch(o){case"assignVisitorName":t.visitorName=a.visitorName;break;case"visitor":t.chatList.push(a),t.$nextTick((function(){t.scrollToBottom()}));break;case"connCount":t.onlineCount=a.connectCount;break;case"chat":t.chatList.push(a),t.$nextTick((function(){t.scrollToBottom()}));break;case"chatHis":(i=t.chatList).push.apply(i,(0,n.default)(a.chatHisList)),t.$nextTick((function(){t.scrollToBottom()}));break}})),uni.onSocketError((function(e){console.log("WebSocket连接打开失败！"),t.reconnect()})),uni.onSocketClose((function(e){console.log("WebSocket 已关闭！"),t.reconnectCtrl&&t.reconnect()}))}}};e.default=c}}]);